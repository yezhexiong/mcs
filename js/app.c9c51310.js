(function(t){function e(e){for(var n,s,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/mcs/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"004b":function(t,e,a){},"034f":function(t,e,a){"use strict";var n=a("85ec"),o=a.n(n);o.a},"0e14":function(t,e,a){},1743:function(t,e,a){"use strict";var n=a("004b"),o=a.n(n);o.a},"199c":function(t,e){},"22fe":function(t,e,a){"use strict";var n=a("9cf4"),o=a.n(n);o.a},"23be":function(t,e,a){"use strict";var n=a("199c"),o=a.n(n);e["default"]=o.a},"24fa":function(t,e,a){"use strict";var n=a("b610"),o=a.n(n);o.a},"2b36":function(module,exports,__webpack_require__){__webpack_require__("99af"),__webpack_require__("c975"),__webpack_require__("a15b"),__webpack_require__("fb6a"),__webpack_require__("a434"),__webpack_require__("d3b7"),__webpack_require__("4d63"),__webpack_require__("ac1f"),__webpack_require__("25f0"),__webpack_require__("466d"),__webpack_require__("5319"),__webpack_require__("1276");var _typeof=__webpack_require__("7037"),extensionFunc={};extensionFunc.String={trim:function(t){return t.replace(/^\s+|\s+$/g,"")},lTrim:function(t){return t.replace(/(^\s*)/g,"")},rTrim:function(t){return t.replace(/(\s*$)/g,"")},IsNum:function(t){return null!=t&&""!=t&&!isNaN(t)},isInteger:function(t){var e=/^-?\d+$/;return!!e.test(t)},isEmail:function(t){var e=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;return!!e.test(t)},isNull:function(t){return t.byteLength()<1},IsIdCard:function(t){var e,a;t=t.toLowerCase();var n="10x98765432",o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=["","","","","","","","","","","","北京","天津","河北","山西","内蒙古","","","","","","辽宁","吉林","黑龙江","","","","","","","","上海","江苏","浙江","安微","福建","江西","山东","","","","河南","湖北","湖南","广东","广西","海南","","","","重庆","四川","贵州","云南","西藏","","","","","","","陕西","甘肃","青海","宁夏","新疆","","","","","","台湾","","","","","","","","","","香港","澳门","","","","","","","","","国外"],s=t.match(/^(\d{2})\d{4}(((\d{2})(\d{2})(\d{2})(\d{3}))|((\d{4})(\d{2})(\d{2})(\d{3}[x\d])))$/i);if(null==s)return!1;if(s[1]>=i.length||""==i[s[1]])return!1;if(12==s[2].length?(a=t.substr(0,17),e=[s[9],s[10],s[11]].join("-")):(a=t.substr(0,6)+"19"+t.substr(6),e=["19"+s[4],s[5],s[6]].join("-")),!this.IsDate(e,"ymd"))return!1;for(var r=0,l=0;l<=16;l++)r+=a.charAt(l)*o[l];return a+=n.charAt(r%11),15==t.length||18==t.length&&t==a},IsDate:function(t,e){var a,n,o,i;switch(e=e||"ymd",e){case"ymd":if(a=t.match(new RegExp("^((\\d{4})|(\\d{2}))([-./])(\\d{1,2})\\4(\\d{1,2})$")),null==a)return!1;i=a[6],o=1*a[5],n=4==a[2].length?a[2]:r(parseInt(a[3],10));break;case"dmy":if(a=t.match(new RegExp("^(\\d{1,2})([-./])(\\d{1,2})\\2((\\d{4})|(\\d{2}))$")),null==a)return!1;i=a[1],o=1*a[3],n=4==a[5].length?a[5]:r(parseInt(a[6],10));break;default:break}if(!parseInt(o))return!1;o=0==o?12:o;var s=new Date(n,o-1,i);return"object"==_typeof(s)&&n==s.getFullYear()&&o==s.getMonth()+1&&i==s.getDate();function r(t){return(t<30?"20":"19")+t|0}},toJson:function toJson(str){return eval("("+str+")")},escapeHTML:function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">")},unescapeHTML:function(t){return t.replace(/</g,"<").replace(/>/g,">").replace(/&/g,"&")},byteLength:function(t){return t.replace(/[^\x00-\xff]/g,"**").length},delLast:function(t){return t.substring(0,t.length-1)},toInt:function(t){return Math.floor(t)},toArray:function(t,e){return t.split(e||"")},toDate:function(t){return new Date(t.replace(/[-]/g,"/"))},left:function(t,e){if(null==t)return"";var a=t.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");return a=a.slice(0,e).replace(/\*\*/g," ").replace(/\*/g,"").length,t.slice(0,a)},leftAddDot:function(t,e){if(null==t)return"";var a=t.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");return a=a.slice(0,e).replace(/\*\*/g," ").replace(/\*/g,"").length,t.length<=a?t:t.slice(0,a)+"..."},right:function(t,e){var a=t.length,n=t.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");return n=n.slice(n.length-e,n.length).replace(/\*\*/g," ").replace(/\*/g,"").length,t.slice(a-n,a)},removeHTML:function(t){return t.replace(/<\/?[^>]+>/gi,"")},format:function(){for(var t=arguments[0],e=[],a=1,n=arguments.length;a<n;a++)e.push(arguments[a]);return t.replace(/\{(\d+)\}/g,(function(t,a){return e[a]}))},toLower:function(t){return t.toLowerCase()},toUpper:function(t){return t.toUpperCase()},on16:function(t){for(var e=[],a=0;a<t.length;)e[a]=("00"+t.charCodeAt(a++).toString(16)).slice(-4);return"\\u"+e.join("\\u")},un16:function(t){return unescape(t.replace(/\\/g,"%"))},formatDateTime:function(t,e){if(null==t)return"";if(""==t)return"";e&&""!=e||(e="yyyy-MM-dd"),t=t.replace("T"," ");var a=new Date(t.replace(/[-]/g,"/"));return extensionFunc.Date.format(a,e)},escape:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return escape(t)})),unescape:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return unescape(t)})),alert:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){alert(t)})),FormatNull:function(t){return"null"==t||null==t?"":t},toDecimal:function(t){if(""==t)return"";if("undefined"==typeof t)return"";var e=parseFloat(t);if(isNaN(e))return!1;var a=Math.round(100*t)/100,n=a.toString(),o=n.indexOf(".");o<0&&(o=n.length,n+=".");while(n.length<=o+2)n+="0";return n}},extensionFunc.Date={format:function(t,e){e&&""!=e||(e="yyyy/MM/dd");var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e},dateDiff:function(t,e,a){a=a.toUpperCase();var n=1;switch(a){case"D":n=864e5;break;case"H":n=36e5;break;case"M":n=6e4;break;case"S":n=1e3;break;case"T":n=1;break;default:n=1e3;break}var o=new Date(Date.parse(t.replace(/-/g,"/"))),i=new Date(Date.parse(e.replace(/-/g,"/")));try{return Math.round((i.getTime()-o.getTime())/n)}catch(s){console.log(s)}},addYear:function(t,e){return this.add(t,"yy",e)},addMonth:function(t,e){return this.add(t,"mm",e)},addDay:function(t,e){return this.add(t,"dd",e)},add:function(t,e,a){var n,o=t.getTime();switch(a=parseInt(a),e){case"ms":o+=a;break;case"ss":o+=1e3*a;break;case"mi":o+=6e4*a;break;case"hh":o+=36e5*a;break;case"dd":o+=864e5*a;break;case"wk":o+=6048e5*a;break;case"mm":n=new Date(Date.parse(t)),n.setFullYear(t.getFullYear()+Math.floor((t.getMonth()+a)/12));var i=(t.getMonth()+a)%12;i<0&&(i+=12),n.setMonth(i);break;case"qq":n=new Date(Date.parse(t)),n.setFullYear(t.getFullYear()+Math.floor((t.getMonth()+3*a)/12));var s=(t.getMonth()+3*a)%12;i<0&&(s+=12),n.setMonth(s);break;case"yy":n=new Date(Date.parse(t)),n.setFullYear(t.getFullYear()+a);break}return null==n?new Date(o):n}},extensionFunc.Function={timeout:function(t,e){return setTimeout(t,e)},interval:function(t,e){return setInterval(t,e)},bind:function(t){for(var e=arguments[1],a=[],n=2,o=arguments.length;n<o;n++)a.push(arguments[n]);return function(){for(var n=a.concat(),o=0,i=arguments.length;o<i;o++)n.push(arguments[o]);return t.apply(e||this,n)}},bindEvent:function(t){for(var e=arguments[1],a=[],n=2,o=arguments.length;n<o;n++)a.push(arguments[n]);return function(n){var o=a.concat();return o.unshift(n||window.event),t.apply(e||this,o)}},clone:function(t){var e=function(){return t.apply(this,arguments)};for(var a in e.prototype=t.prototype,t)t.hasOwnProperty(a)&&"prototype"!=a&&(e[a]=t[a]);return e}},extensionFunc.Array={indexOfValue:function(t,e){for(var a=0;a<t.length;a++)if(t[a]===e)return a;return-1},removeValue:function(t,e){var a=t.indexOfValue(e);a>-1&&t.splice(a,1)},removeIndex:function(t,e){if(isNaN(e)||e>t.length)return!1;for(var a=0,n=0;a<t.length;a++)t[a]!=t[e]&&(t[n++]=t[a]);t.length-=1}},extensionFunc.others={ext:function(t,e,a){for(var n in t||(t={}),e)t[n]=a?extensionFunc.Function.bind((function(){for(var t=arguments[0],e=arguments[1],a=[this],n=2,o=arguments.length;n<o;n++)a.push(arguments[n]);return t[e].apply(t,a)}),null,e,n):e[n]},_onlyPush:function(t,e){return e.constructor!=Array&&(e=[e]),extensionFunc.Array.unique(t.concat(e))}},extensionFunc.install=function(){console.log("run extensionFunc.install"),extensionFunc.others.ext(String.prototype,extensionFunc.String,!0),extensionFunc.others._onlyPush,extensionFunc.others.ext(Function.prototype,extensionFunc.Function,!0),extensionFunc.others.ext(Date.prototype,extensionFunc.Date,!0),extensionFunc.others.ext(Array.prototype,extensionFunc.Array,!0)},extensionFunc.install()},"396d":function(t,e,a){},"3dfd":function(t,e,a){"use strict";var n=a("d1fa"),o=a("23be"),i=(a("034f"),a("2877")),s=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"3e0b":function(t,e,a){"use strict";var n=a("6c1d"),o=a.n(n);o.a},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=a("f23d"),i=a("8ded"),s=a.n(i),r=a("1157"),l=a.n(r),c=a("3dfd"),u={Login:{login:"/UserAdminService/IsUserValid"},Consultation:{AddApply:"/OrderTreat/BPMConsulApplyMaster",DraftApply:"/OrderTreat/BPMConsulDraftApply",ApprovalApply:"/OrderTreat/ApprovalApply",ApplyInfo:"/OrderTreat/BPMConsulApplyInfo",ApplyList:"/OrderTreat/BPMGetConsultationApplyList",ApprovalList:"/OrderTreat/BPMGetConsultationApprovalList",DraftList:"/OrderTreat/BPMGetConsultationStatusList",CommentList:"/OrderTreat/BPMApprovalCommentList"},Patient:{GetInPatBasicInfo:"/PatientService/GetInPatBasicInfo"},Common:{GetWidgetDict:"/DictAdminService/GetWidgetDictSon",GetWidgetDictRecursion:"/DictAdminService/GetWidgetDictSonRecursion",SerchCodeConfig:"/DictAdminService/GetSerchCodeConfig",GetCodeConfig:"/DictAdminService/GetCodeConfig",GetStaffList:"/DoctorAdminService/GetStaffList",GetLabTestItem:"/LabTestService/GetLabTestAlready",GetLabTestItemInfo:"/LabTestService/GetPatCpoeTestResultList",GetExamReport:"/ExamService/GetCpoeExamReportList",GetExpertList:"/DictAdminService/GetWidgetExpertList",GetExpertDetail:"/DictAdminService/GetWidgetExpertUserList"}},d=(a("d3b7"),a("96cf"),a("1da1")),p=a("bc3a"),f=a.n(p),m=(a("4de4"),a("4160"),a("c975"),a("fb6a"),a("b0c0"),a("159b"),"Access_Token"),h="Login_User_Info",g="Cache_Dict_",v="Cache_Global_",y={_loginUserInfo:null,get LoginUserInfo(){return null===this._loginUserInfo&&(this._loginUserInfo=s.a.get(h),console.log("this._loginUserInfo === null")),this._loginUserInfo},set LoginUserInfo(t){s.a.set(h,t,6048e5),this._loginUserInfo=t},_accessToken:"",get AccessToken(){return""===this._accessToken&&(this._accessToken=s.a.get(m)),this._accessToken},set AccessToken(t){s.a.set(m,t,6048e5),this._accessToken=t},_doctors:[],GetAllDoctors:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,o,i,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof t._doctors&&0!==t._doctors.length||(t._doctors=s.a.get(v+"Doctors")),"undefined"!=typeof t._doctors&&0!==t._doctors.length){e.next=19;break}return a=u.Common.GetStaffList,n=[],e.next=6,t.GetOffices();case 6:return o=e.sent,o.forEach((function(t){n.push(t.itemcode)})),console.log("groups=",n),i={GroupClass:null,ListGroupCode:n,ListDeptCodeExclude:[],Title:null,HospitalCode:"1000000",ValidIndicator:null,IsError:!1,ErrMessage:null},e.next=12,Rt.AsyncPost(a,i);case 12:if(r=e.sent,l=r.data,"undefined"!=typeof l){e.next=17;break}return t.$message.error("未找到任何医生，请联系管理员"),e.abrupt("return",[]);case 17:s.a.set(v+"Doctors",l,6048e5),t._doctors=l;case 19:return e.abrupt("return",t._doctors);case 20:case"end":return e.stop()}}),e)})))()},GetDoctorsInPage:function(){var t=arguments,e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n,o,i,s,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{pageSize:15,current:1,total:0},o=t.length>1&&void 0!==t[1]?t[1]:"",a.next=4,e.GetAllDoctors();case 4:if(i=a.sent,s=[],s=""===o?i:i.filter((function(t){if(t.name.indexOf(o)>-1||t.inputcode.indexOf(o)>-1)return!0})),0!==s.length){a.next=9;break}return a.abrupt("return",{total:0,data:[]});case 9:return r=(n.current-1)*n.pageSize,l=r+n.pageSize,l>s.length&&(l=s.length),console.log("start=",r),console.log("end=",l),a.abrupt("return",{total:s.length,data:s.slice(r,l)});case 15:case"end":return a.stop()}}),a)})))()},_offices:[],GetOffices:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof t._offices&&0!==t._offices.length||(t._offices=s.a.get(v+"Offices")),"undefined"!=typeof t._offices&&0!==t._offices.length){e.next=13;break}return a=u.Common.GetCodeConfig,n=300,e.next=6,Rt.AsyncPost(a,n);case 6:if(o=e.sent,i=o.data.clslistiteminfo,"undefined"!=typeof i){e.next=11;break}return t.$message.error("未找到任何科室，请联系管理员"),e.abrupt("return",[]);case 11:s.a.set(v+"Offices",i,6048e5),t._offices=i;case 13:return e.abrupt("return",t._offices);case 14:case"end":return e.stop()}}),e)})))()},GetOfficesInPage:function(){var t=arguments,e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n,o,i,s,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{pageSize:15,current:1,total:0},o=t.length>1&&void 0!==t[1]?t[1]:"",a.next=4,e.GetOffices();case 4:if(i=a.sent,s=[],s=""===o?i:i.filter((function(t){if(t.itemname.indexOf(o)>-1||t.inputcode.indexOf(o)>-1)return!0})),0!==s.length){a.next=9;break}return a.abrupt("return",{total:0,data:[]});case 9:return r=(n.current-1)*n.pageSize,l=r+n.pageSize,l>s.length&&(l=s.length),console.log("start=",r),console.log("end=",l),a.abrupt("return",{total:s.length,data:s.slice(r,l)});case 15:case"end":return a.stop()}}),a)})))()},_experts:[],GetExperts:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof t._experts&&0!==t._experts.length||(t._experts=s.a.get(v+"Experts")),"undefined"!=typeof t._experts&&0!==t._experts.length){e.next=12;break}return a=u.Common.GetExpertList,e.next=5,Rt.AsyncGet(a);case 5:if(n=e.sent,o=n.data,"undefined"!=typeof o){e.next=10;break}return t.$message.error("未找到任专家组，请联系管理员"),e.abrupt("return",[]);case 10:s.a.set(v+"Experts",o,6048e5),t._experts=o;case 12:return e.abrupt("return",t._experts);case 13:case"end":return e.stop()}}),e)})))()},GetExpertsInPage:function(){var t=arguments,e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n,o,i,s,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{pageSize:15,current:1,total:0},o=t.length>1&&void 0!==t[1]?t[1]:"",a.next=4,e.GetExperts();case 4:if(i=a.sent,s=[],s=""===o?i:i.filter((function(t){if(t.itemname.indexOf(o)>-1||t.inputcode.indexOf(o)>-1)return!0})),0!==s.length){a.next=9;break}return a.abrupt("return",{total:0,data:[]});case 9:return r=(n.current-1)*n.pageSize,l=r+n.pageSize,l>s.length&&(l=s.length),console.log("start=",r),console.log("end=",l),a.abrupt("return",{total:s.length,data:s.slice(r,l)});case 15:case"end":return a.stop()}}),a)})))()}},b=a("56cd"),_=a("8c4f"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",{attrs:{id:"home-layout-top-side"}},[a("a-layout-header",{staticClass:"ant-header"},[a("div",{staticClass:"ant-header-logo"},[a("i",{staticClass:"ant-header-logo-img"}),a("span",{staticClass:"ant-header-logo-txt"},[t._v("医生会诊管理系统")])])]),a("a-layout",{staticClass:"ant-body"},[a("a-layout-sider",{attrs:{trigger:null,collapsedWidth:"50px",theme:"light"},model:{value:t.collapsed,callback:function(e){t.collapsed=e},expression:"collapsed"}},[a("div",{staticClass:"ant-menu-toggle-collapsed",on:{click:function(){return t.collapsed=!t.collapsed}}},[a("a-icon",{staticClass:"trigger",attrs:{type:t.collapsed?"menu-unfold":"menu-fold"}})],1),a("div",{staticClass:"layout-sider-menu"},[a("a-menu",{attrs:{"default-selected-keys":["1"],"default-open-keys":["sub1"],mode:"inline","inline-collapsed":t.collapsed}},[a("a-sub-menu",{key:"sub1"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"mail"}}),a("span",[t._v("会诊列表")])],1),a("a-menu-item",{key:"5"},[a("router-link",{attrs:{to:"/Consultation"}},[t._v("会诊管理")])],1),a("a-menu-item",{key:"6"},[a("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1),a("a-menu-item",{key:"7"},[t._v(" Option 7 ")]),a("a-menu-item",{key:"8"},[t._v(" Option 8 ")])],1),a("a-sub-menu",{key:"sub2"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"appstore"}}),a("span",[t._v("Navigation Two")])],1),a("a-menu-item",{key:"9"},[t._v(" Option 9 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")]),a("a-menu-item",{key:"10"},[t._v(" Option 10 ")])],1)],1)],1)]),a("a-layout",[a("a-layout-content",[a("router-view")],1)],1)],1)],1)},D=[],x={data:function(){return{collapsed:!1}},watch:{},mounted:function(){},methods:{toggleCollapsed:function(){this.collapsed=!this.collapsed}}},M=x,w=(a("9293"),a("2877")),S=Object(w["a"])(M,k,D,!1,null,null,null),C=S.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"div_login"}},[n("img",{attrs:{alt:"Vue logo",src:a("cf05")}}),n("h1",[t._v("欢迎来到医生会诊管理系统")]),n("a-form",{attrs:{layout:"inline",form:t.form},on:{submit:t.handleSubmit}},[n("a-form-item",{attrs:{"validate-status":t.userNameError()?"error":"",help:t.userNameError()||""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{required:!0,message:"Please input your account!"}]}],expression:"[\n          'account',\n          { rules: [{ required: true, message: 'Please input your account!' }] },\n        ]"}],attrs:{placeholder:"Account"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),n("a-form-item",{attrs:{"validate-status":t.passwordError()?"error":"",help:t.passwordError()||""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"Please input your Password!"}]}],expression:"[\n          'password',\n          { rules: [{ required: true, message: 'Please input your Password!' }] },\n        ]"}],attrs:{type:"password",placeholder:"Password"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),n("a-form-item",[n("a-button",{attrs:{type:"primary","html-type":"submit",disabled:t.hasErrors(t.form.getFieldsError())}},[t._v(" Log in ")])],1)],1)],1)},j=[],$=(a("45fc"),a("b64b"),a("6199")),A=a.n($);function P(t){return Object.keys(t).some((function(e){return t[e]}))}var L={data:function(){return{hasErrors:P,form:this.$form.createForm(this,{name:"horizontal_login"})}},mounted:function(){var t=this;this.$nextTick((function(){t.form.validateFields()}))},methods:{userNameError:function(){var t=this.form,e=t.getFieldError,a=t.isFieldTouched;return a("account")&&e("account")},passwordError:function(){var t=this.form,e=t.getFieldError,a=t.isFieldTouched;return a("password")&&e("password")},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){if(!t){var n=A()(a.password).toUpperCase(),o="?dbUser="+a.account+"&pwd="+n;e.$Http.AsyncGet(e.$Api.Login.login+o).then((function(t){return e.loginSuccess(t)}))}}))},loginSuccess:function(t){var e=this,a=t.data;this.$GlobalData.AccessToken="4ec1dac6-f0a4-4b3e-bf94-aa60b18148fe",this.$GlobalData.LoginUserInfo={dbuser:"000324",username:"朱医生",userid:"000324",applydeptcode:"2022",hospitalid:"1000000",hospitalcode:"1000000"},console.log(a),a.passed?(this.$router.push({path:"/"}),setTimeout((function(){e.$notification.success({message:"欢迎",description:"欢迎回来"})}),1e3)):this.$message.error("用户名密码错误，请重试！")}}},O=L,R=(a("3e0b"),Object(w["a"])(O,I,j,!1,null,null,null)),F=R.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"index_tabs"}},[a("a-tabs",{on:{tabClick:t.tabClick}},[a("a-tab-pane",{key:"apply-list",attrs:{tab:"发起会诊"}},[a("apply-list",{ref:"apply_table",attrs:{queryParam:t.applyQueryParam}})],1),a("a-tab-pane",{key:"approval-list",attrs:{tab:"应邀会诊"}},[a("approval-list",{ref:"approval_list",attrs:{queryParam:t.approvalQueryParam}})],1),a("div",{staticStyle:{"margin-top":"2px"},attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[a("a-form-model",{attrs:{layout:"inline"}},["apply-list"===t.curlTab?a("div",[a("a-form-model-item",{attrs:{label:"会诊时间:"}},[a("a-range-picker",{style:{width:"200px"},model:{value:t.applyQueryParam.applyDateRegion,callback:function(e){t.$set(t.applyQueryParam,"applyDateRegion",e)},expression:"applyQueryParam.applyDateRegion"}})],1),a("a-form-model-item",{attrs:{label:"范围"}},[a("a-select",{style:{width:"100px"},attrs:{"default-value":"99",placeholder:"请选择"},model:{value:t.applyQueryParam.approvaltype,callback:function(e){t.$set(t.applyQueryParam,"approvaltype",e)},expression:"applyQueryParam.approvaltype"}},[a("a-select-option",{attrs:{value:"99"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("本人发起")]),a("a-select-option",{attrs:{value:"2"}},[t._v("本科室发起")])],1)],1),a("a-form-model-item",{attrs:{label:"类型"}},[a("a-select",{style:{width:"100px"},attrs:{"default-value":"99",placeholder:"请选择"},model:{value:t.applyQueryParam.consultationtype,callback:function(e){t.$set(t.applyQueryParam,"consultationtype",e)},expression:"applyQueryParam.consultationtype"}},[a("a-select-option",{attrs:{value:"99"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"2"}},[t._v("平会诊")]),a("a-select-option",{attrs:{value:"1"}},[t._v("急会诊")]),a("a-select-option",{attrs:{value:"3"}},[t._v("MDT会诊")])],1)],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-select",{style:{width:"100px"},attrs:{"default-value":"99",placeholder:"请选择"},model:{value:t.applyQueryParam.approvalstatus,callback:function(e){t.$set(t.applyQueryParam,"approvalstatus",e)},expression:"applyQueryParam.approvalstatus"}},[a("a-select-option",{attrs:{value:"99"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"2"}},[t._v("暂存")]),a("a-select-option",{attrs:{value:"16"}},[t._v("会诊中")]),a("a-select-option",{attrs:{value:"14"}},[t._v("审核通过")]),a("a-select-option",{attrs:{value:"15"}},[t._v("已完成")]),a("a-select-option",{attrs:{value:"10"}},[t._v("作废")]),a("a-select-option",{attrs:{value:"11"}},[t._v("驳回申请")])],1)],1),a("a-form-model-item",[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"plus"},on:{click:t.openForm}},[t._v("新建(测试入口)")])],1)],1):t._e(),"approval-list"===t.curlTab?a("div",[a("a-form-model-item",{attrs:{label:"会诊时间:"}},[a("a-range-picker",{style:{width:"200px"},model:{value:t.approvalQueryParam.applyDateRegion,callback:function(e){t.$set(t.approvalQueryParam,"applyDateRegion",e)},expression:"approvalQueryParam.applyDateRegion"}})],1),a("a-form-model-item",{attrs:{label:"范围"}},[a("a-select",{style:{width:"100px"},attrs:{"default-value":"99",placeholder:"请选择"},model:{value:t.approvalQueryParam.approvaltype,callback:function(e){t.$set(t.approvalQueryParam,"approvaltype",e)},expression:"approvalQueryParam.approvaltype"}},[a("a-select-option",{attrs:{value:"99"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("本人发起")]),a("a-select-option",{attrs:{value:"2"}},[t._v("本科室发起")])],1)],1),a("a-form-model-item",{attrs:{label:"类型"}},[a("a-select",{style:{width:"100px"},attrs:{"default-value":"99",placeholder:"请选择"},model:{value:t.approvalQueryParam.consultationtype,callback:function(e){t.$set(t.approvalQueryParam,"consultationtype",e)},expression:"approvalQueryParam.consultationtype"}},[a("a-select-option",{attrs:{value:"99"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"2"}},[t._v("平会诊")]),a("a-select-option",{attrs:{value:"1"}},[t._v("急会诊")]),a("a-select-option",{attrs:{value:"3"}},[t._v("MDT会诊")])],1)],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-select",{style:{width:"100px"},attrs:{"default-value":"99",placeholder:"请选择"},model:{value:t.approvalQueryParam.approvalstatus,callback:function(e){t.$set(t.approvalQueryParam,"approvalstatus",e)},expression:"approvalQueryParam.approvalstatus"}},[a("a-select-option",{attrs:{value:"99"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"2"}},[t._v("暂存")]),a("a-select-option",{attrs:{value:"16"}},[t._v("会诊中")]),a("a-select-option",{attrs:{value:"14"}},[t._v("审核通过")]),a("a-select-option",{attrs:{value:"15"}},[t._v("已完成")]),a("a-select-option",{attrs:{value:"10"}},[t._v("作废")]),a("a-select-option",{attrs:{value:"11"}},[t._v("审核驳回")])],1)],1)],1):t._e()])],1)],1)],1)},E=[],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,scroll:{x:1500},pagination:t.pagination,loading:t.loading,size:"small",rowKey:"consulno"},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"receivenumInfo",fn:function(e,a){return[t._v(" "+t._s(a.receivenum+"/"+a.receiveall)+" ")]}},{key:"patStatus",fn:function(e,a){return[t._v(" "+t._s(t.$GlobalDict.Consultation.ApprovalStatus.FormatDict(a.pat_status))+" ")]}},{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.openForm({primaryKey:n.consulno,pat_status:n.pat_status})}}},[t._v("详细")])]],2)}}])}),a("edit-form",{ref:"editForm",attrs:{visible:t.editFormVisible,"init-data":t.formInitData},on:{"update:visible":function(e){t.editFormVisible=e}}}),a("view-form",{ref:"viewForm",attrs:{visible:t.viewFormVisible,"init-data":t.formInitData},on:{"update:visible":function(e){t.viewFormVisible=e}}})],1)},q=[],z=a("5530"),K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{visible:t.visible,title:t.title+"["+t.formModel.pat_status+"]",centered:"",width:"900px"},on:{cancel:t.handlerCancel}},[a("template",{slot:"footer"},[15===t.formModel.pat_status||-1===t.formModel.pat_status?a("span",[a("a-button",{key:"btnSend",attrs:{type:"primary",loading:t.btnSendLoading},on:{click:t.handlerSend}},[t._v(" 发送(直接) ")])],1):t._e(),2===t.formModel.pat_status?a("span",[a("a-button",{key:"btnDraftApply",attrs:{type:"primary",loading:t.btnDraftApplyLoading},on:{click:t.handlerDraftApply}},[t._v(" 发送(从草稿) ")])],1):t._e(),11===t.formModel.pat_status?a("span",[a("a-button",{key:"btnReSend",attrs:{type:"primary",loading:t.btnReSendLoading},on:{click:t.handlerReSend}},[t._v(" 重新发起 ")])],1):t._e(),15===t.formModel.pat_status||-1===t.formModel.pat_status||2===t.formModel.pat_status?a("span",[a("a-button",{key:"btnSave",attrs:{type:"primary",loading:t.btnSaveLoading},on:{click:t.handlerSave}},[t._v("保存 ")])],1):t._e(),15===t.formModel.pat_status||2===t.formModel.pat_status?a("span",[a("a-button",{key:"btnDelete",attrs:{type:"primary",loading:t.btnDeleteLoading},on:{click:t.handlerDelete}},[t._v(" 删除 ")])],1):t._e(),13===t.formModel.pat_status||2===t.formModel.pat_status||16===t.formModel.pat_status?a("span",[a("a-button",{key:"btnPrint",on:{click:t.handlerPrint}},[t._v("打印")])],1):t._e(),a("a-button",{key:"btnClose",on:{click:t.handlerCancel}},[t._v("关闭")])],1),a("a-spin",{attrs:{tip:"Loading...",spinning:t.formSpinning}},[a("a-form-model",{ref:"editForm",attrs:{rules:t.rules,model:t.formModel,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[-1!=t.formModel.pat_status?a("div",{staticClass:"my_status_flag"},[t._v(" "+t._s(t.$GlobalDict.Consultation.ApprovalStatus.FormatDict(t.formModel.pat_status))+" ")]):t._e(),a("a-form-model-item",{attrs:{label:"会诊患者"}},[t._v(" 姓名:"+t._s(t.formModel.name)+" 编号:"+t._s(t.formModel.patientid)+" 就诊号:"+t._s(t.formModel.visitid)+" ")]),a("a-form-model-item",{ref:"consultationattr",attrs:{label:"会诊类型",required:""}},[a("a-radio-group",{attrs:{"default-value":"2","button-style":"solid"},model:{value:t.formModel.consultationattr,callback:function(e){t.$set(t.formModel,"consultationattr",e)},expression:"formModel.consultationattr"}},[a("a-radio-button",{attrs:{value:"2"}},[t._v(" 普通-平会诊 ")]),a("a-radio-button",{attrs:{value:"1"}},[t._v(" 普通-急会诊 ")]),a("a-radio-button",{attrs:{value:"3"}},[t._v(" MDT会诊 ")])],1)],1),a("a-form-model-item",{attrs:{label:"会诊时间",prop:"applydate"}},[a("a-date-picker",{attrs:{placeholder:"选择日期"},model:{value:t.formModel.applydate,callback:function(e){t.$set(t.formModel,"applydate",e)},expression:"formModel.applydate"}})],1),a("a-form-model-item",{ref:"consultationpurpose",attrs:{label:"会诊目的",prop:"consultationpurpose",autoLink:!1}},[a("span",[t._v("常用目的:")]),t._l(t.dict_ConsultationPurpose,(function(e){return a("span",{key:e.message},[a("a-button",{attrs:{type:"link"},on:{click:function(a){return t.importToPurpose(e.label)}}},[t._v(t._s(e.label))])],1)})),a("a-input",{attrs:{type:"textarea",placeholder:"点击上诉常用选项 或 输入"},on:{blur:function(){t.$refs.consultationpurpose.onFieldBlur()}},model:{value:t.formModel.consultationpurpose,callback:function(e){t.$set(t.formModel,"consultationpurpose",e)},expression:"formModel.consultationpurpose"}})],2),a("a-form-model-item",{attrs:{label:"会诊诊断",prop:"definitediagnosis","has-feedback":""}},[a("a-auto-complete",{staticClass:"global-search",attrs:{placeholder:"请选择会诊诊断","data-source":t.dataSourceDefinitediagnosis},on:{search:t.handleSearchInDefinitediagnosis},model:{value:t.formModel.definitediagnosis,callback:function(e){t.$set(t.formModel,"definitediagnosis",e)},expression:"formModel.definitediagnosis"}})],1),a("a-form-model-item",{ref:"memo",attrs:{label:"患者病情",prop:"memo",autoLink:!1}},[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.importToMemo("\n会诊诊断："+t.formModel.definitediagnosis+";\n")}}},[t._v("导入病情")]),a("a-button",{attrs:{type:"link"},on:{click:function(){t.selectAssayVisible=!0}}},[t._v("导入检验")]),a("a-button",{attrs:{type:"link"},on:{click:function(){t.selectExaminationVisible=!0}}},[t._v("导入检查")]),a("a-input",{staticStyle:{height:"100px"},attrs:{type:"textarea",placeholder:"请简单描述患者病情"},on:{blur:function(){t.$refs.memo.onFieldBlur()}},model:{value:t.formModel.memo,callback:function(e){t.$set(t.formModel,"memo",e)},expression:"formModel.memo"}})],1),a("a-form-model-item",{attrs:{label:"补充患者资料"}},[a("a-upload-dragger",{attrs:{name:"file",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},on:{change:t.uploadFiles}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"cloud-upload"}}),a("span",{staticStyle:{"padding-left":"10px"}},[t._v("点击【上传】或拖动资料到此区域完成上传")])],1)])],1),"3"===t.formModel.consultationattr?a("div",[a("a-divider",{attrs:{orientation:"left"}},[t._v("肿瘤分期")]),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"分期方法",prop:"staging_method","label-col":t.labelCol2}},[a("a-select",{attrs:{options:t.dict_StagingMethod,placeholder:"请选分期方法"},model:{value:t.formModel.staging_method,callback:function(e){t.$set(t.formModel,"staging_method",e)},expression:"formModel.staging_method"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"类别",prop:"classification_stages","label-col":t.labelCol2}},[a("a-select",{attrs:{options:t.dict_ClassificationStages,placeholder:"请选类别"},model:{value:t.formModel.classification_stages,callback:function(e){t.$set(t.formModel,"classification_stages",e)},expression:"formModel.classification_stages"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"原发肿瘤","label-col":t.labelCol2}},[a("a-select",{attrs:{options:t.dict_TumorStaging,placeholder:"请选原发肿瘤"},model:{value:t.formModel.primary_tumor,callback:function(e){t.$set(t.formModel,"primary_tumor",e)},expression:"formModel.primary_tumor"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"淋巴结转移","label-col":t.labelCol2}},[a("a-select",{attrs:{options:t.dict_LymphMetastasis,placeholder:"请选择淋巴结转移"},model:{value:t.formModel.lymph_metastasis,callback:function(e){t.$set(t.formModel,"lymph_metastasis",e)},expression:"formModel.lymph_metastasis"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"远处转移","label-col":t.labelCol2}},[a("a-select",{attrs:{options:t.dict_DistantMetastasis,placeholder:"请选择远处转移"},model:{value:t.formModel.distant_metastasis,callback:function(e){t.$set(t.formModel,"distant_metastasis",e)},expression:"formModel.distant_metastasis"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"分期","label-col":t.labelCol2}},[a("a-select",{attrs:{options:t.dict_ByStages,placeholder:"请选择分期"},model:{value:t.formModel.by_stages,callback:function(e){t.$set(t.formModel,"by_stages",e)},expression:"formModel.by_stages"}})],1)],1)],1),a("a-divider")],1):t._e(),a("a-form-model-item",{attrs:{label:"会诊对象"}},[a("a-tag",{staticStyle:{background:"#fff",borderstyle:"dashed"},on:{click:function(e){t.selectDoctorsVisible=!0}}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 添加对象 ")],1),t._l(t.formModel.clsconsultationdetaillist,(function(e){return[a("a-tag",{key:e.key,attrs:{closable:!0,color:"#f50"},on:{close:function(){return t.handleClose(e.key)}}},[t._v(" "+t._s(e.groupname+"("+e.consultationdept+")")+" ")])]}))],2),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"申请医生",prop:"applydoctor","has-feedback":"","label-col":t.labelCol2}},[a("a-input",{model:{value:t.formModel.applydoctor,callback:function(e){t.$set(t.formModel,"applydoctor",e)},expression:"formModel.applydoctor"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"联系方式",prop:"phone","has-feedback":"","label-col":t.labelCol2}},[a("a-input",{model:{value:t.formModel.phone,callback:function(e){t.$set(t.formModel,"phone",e)},expression:"formModel.phone"}})],1)],1)],1)],1)],1)],2),a("select-assay-modal",{ref:"selectAssayModal",attrs:{visible:t.selectAssayVisible,"patient-id":t.formModel.patientid,"patient-name":t.formModel.name},on:{"update:visible":function(e){t.selectAssayVisible=e},confirmImport:t.handlerConfirmImportAssay}}),a("select-examination-modal",{ref:"selectExaminationModal",attrs:{visible:t.selectExaminationVisible,"patient-id":t.formModel.patientid,"patient-name":t.formModel.name},on:{"update:visible":function(e){t.selectExaminationVisible=e},confirmImport:t.handlerConfirmImportExamination}}),a("select-doctors-modal",{ref:"selectDoctorsModal",attrs:{visible:t.selectDoctorsVisible,"consultation-type":t.formModel.consultationattr},on:{"update:visible":function(e){t.selectDoctorsVisible=e},confirmImport:t.handlerConfirmImportDoctors}})],1)},U=[],N=(a("99af"),{props:{visible:Boolean,initData:{type:Object,default:function(){return{isCreat:!1,primaryKey:0,patientId:"",patientName:"",patientVisitId:"",patientDiagnosis:"",pat_status:-1}}}},data:function(){return{title:"创建会诊申请单",btnSaveLoading:!1,btnSendLoading:!1,btnDraftApplyLoading:!1,btnReSendLoading:!1,btnDeleteLoading:!1,formSpinning:!1,labelCol:{span:4},labelCol2:{span:8},wrapperCol:{span:14},formModel:{},dict_ClassificationStages:[],dict_StagingMethod:[],dict_TumorStaging:[],dict_LymphMetastasis:[],dict_DistantMetastasis:[],dict_ByStages:[],dataSourceDefinitediagnosis:[],dict_ConsultationPurpose:[],rules:{applydate:[{required:!0,message:"请选择会诊日期",trigger:"change"}],consultationpurpose:[{required:!0,message:"请填写会诊目的"}],definitediagnosis:[{required:!0,message:"请选择会诊诊断",trigger:"blur"}],memo:[{required:!0,message:"请填写患者病情"}],applydoctor:[{required:!0,message:"请填写申请医生",trigger:"blur"}],phone:[{required:!0,message:"请填写联系电话",trigger:"blur"}],staging_method:[{required:!0,message:"请选择分期方法",trigger:"blur"}],classification_stages:[{required:!0,message:"请选择类别",trigger:"blur"}]},selectAssayVisible:!1,selectExaminationVisible:!1,selectDoctorsVisible:!1}},created:function(){this.dict_ClassificationStages=this.$GlobalDict.TumorStaging.ClassificationStages.GetDict(),this.dict_StagingMethod=this.$GlobalDict.TumorStaging.StagingMethod.GetDict(),this.dict_TumorStaging=this.$GlobalDict.TumorStaging.PrimaryTumor.GetDict(),this.dict_LymphMetastasis=this.$GlobalDict.TumorStaging.LymphMetastasis.GetDict(),this.dict_DistantMetastasis=this.$GlobalDict.TumorStaging.DistantMetastasis.GetDict(),this.dict_ByStages=this.$GlobalDict.TumorStaging.ByStages.GetDict(),this.dict_ConsultationPurpose=this.$GlobalDict.Consultation.ConsultationPurpose.GetDict()},mounted:function(){},computed:{selectedDoctorsKeys:function(){var t=[];return"undefined"!==typeof this.formModel.clsconsultationdetaillist&&null!=this.formModel.clsconsultationdetaillist&&this.formModel.clsconsultationdetaillist.forEach((function(e){t.push({key:e.consultationdoctor})})),t}},watch:{initData:{handler:function(){this.initData.isCreat?(this.title="创建会诊申请单",this.initFormData(),console.log("watch => handler => this.formModel=",this.formModel)):(this.title="修改会诊申请单",console.log("run EditForm.loadData();"),this.loadData())},deep:!0}},methods:{initFormData:function(){this.formModel={consultationpurpose:"",applydoctor:"",applydoctorCode:"",definitediagnosis:"",consultationattr:"2",memo:"",phone:"",clsconsultationdetaillist:[],filelist:[],applydate:null,pat_status:-1},this.formModel.patientid=this.initData.patientId,this.formModel.visitid=this.initData.patientVisitId,this.formModel.name=this.initData.patientName,this.formModel.definitediagnosis=this.initData.patientDiagnosis,this.formModel.applydoctor=this.$GlobalData.LoginUserInfo.username,this.formModel.applydoctorCode=this.$GlobalData.LoginUserInfo.userid,this.formModel.applydeptcode=this.$GlobalData.LoginUserInfo.applydeptcode,this.formModel.hospitalcode=this.$GlobalData.LoginUserInfo.hospitalcode},loadData:function(){var t=this;if(0!==this.initData.primaryKey){this.formSpinning=!0;var e=this.$Api.Consultation.ApplyInfo+"?folio="+this.initData.primaryKey;this.$Http.AsyncPost(e).then((function(e){t.formModel=e.data,t.formSpinning=!1,console.log("run editform => loadData => this.formModel",t.formModel)}))}},handlerCancel:function(){this.$emit("update:visible",!1)},handlerSave:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return t.$message.error("保存草稿失败"),console.log("error handlerSave!!"),!1;t.btnSaveLoading=!0,t.formModel.pat_status=2;var a={hdconsultation:t.formModel,fileList:[]};t.$Http.AsyncPost(t.$Api.Consultation.AddApply,a).then((function(e){t.btnSaveLoading=!1,t.$message.info("保存草稿成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerSend:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSend!!"),!1;if(console.log("this.formModel.clsconsultationdetaillist=",t.formModel.clsconsultationdetaillist),0!==t.formModel.clsconsultationdetaillist.length){t.btnSendLoading=!0,t.formModel.pat_status=1;var a={hdconsultation:t.formModel,fileList:[]};t.$Http.AsyncPost(t.$Api.Consultation.AddApply,a).then((function(e){t.btnSendLoading=!1,t.$message.info("发送成功"),t.$emit("update:visible",!1),console.log(e)}))}else t.$message.error("请选中会诊对象")}))},handlerDraftApply:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onDraftApply!!"),!1;t.formModel.patsource="3",t.btnDraftApplyLoading=!0,t.$Http.AsyncPost(t.$Api.Consultation.DraftApply,t.formModel).then((function(e){t.btnDraftApplyLoading=!1,t.$message.info("发送成功（从草稿状态)"),t.$emit("update:visible",!1),console.log(e)}))}))},hanllerResetForm:function(){this.$refs.editForm.resetFields()},handlerDelete:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSave!!"),!1;t.btnDeleteLoading=!0,t.formModel.pat_status=2,t.$Http.AsyncPost(t.$Api.Consultation,t.formModel).then((function(e){t.btnDeleteLoading=!1,t.$message.info("删除成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerReSend:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSave!!"),!1;t.btnReSendLoading=!0,t.formModel.pat_status=2,t.$Http.AsyncPost(t.$Api.Consultation,t.formModel).then((function(e){t.btnReSendLoading=!1,t.$message.info("发送成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerPrint:function(){var t=this;console.log("> handlerPrint"),console.log("formModel=",this.formModel),this.loading=!0,setTimeout((function(){t.loading=!1,t.$message.info("handlerPrint")}),3e3)},importToPurpose:function(t){var e="";"undefined"!=typeof this.formModel.consultationpurpose&&(e=this.formModel.consultationpurpose),e+=t+";    ",this.formModel.consultationpurpose=e},importToMemo:function(t){var e="";"undefined"!=typeof this.formModel.memo&&(e=this.formModel.memo),e+=t,this.formModel.memo=e},uploadFiles:function(t){var e=t.file.status;"uploading"!==e&&console.log(t.file,t.fileList),"done"===e?this.$message.success("".concat(t.file.name," file uploaded successfully.")):"error"===e&&this.$message.error("".concat(t.file.name," file upload failed."))},handleClose:function(t){var e=this.formModel.clsconsultationdetaillist.filter((function(e){return e!==t}));console.log(e),this.tags=e},handlerConfirmImportAssay:function(t){var e=[];e.push("\n================= 检验结果  =================\n"),t.forEach((function(t){e.push("检查项:".concat(t.resultitemname,"   |    值:").concat(t.result,"   |    单位:").concat(t.unit,"   |    参考:").concat(t.normalresult,"\n")),e.push("----------------------------------------------------------------------\n")})),this.formModel.memo+=e},handlerConfirmImportExamination:function(t){var e=[];t.forEach((function(t){e.push("\n============== {".concat(t.item,"}检验结果  ==============\n")),e.push(t.value)})),e.push("\n----------------------------------------------------------------------\n"),this.formModel.memo+=e},handlerConfirmImportDoctors:function(t){var e=this,a=[];t.forEach((function(t){a.push({key:t.key,groupname:t.value,ConsulDoctorName:t.value,ConsulDoctor:t.id,consultation_receive_doctor:t.id,consultationdept:t.deptCode,receive_type:t.type,patientid:e.formModel.patientid,visitid:e.formModel.visitid})})),console.log("clsconsultationdetaillist=",a),this.formModel.clsconsultationdetaillist=a},handleSearchInDefinitediagnosis:function(t){var e=this,a={enumoutercoding:14,searchkey:t,pagenum:1,pagesize:10};this.dataSourceDefinitediagnosis=[],this.$Http.AsyncPost(this.$Api.Common.SerchCodeConfig,a).then((function(t){var a=[];t.data.clslistiteminfo.forEach((function(t){return a.push(t.itemname)})),e.dataSourceDefinitediagnosis=a}))}}}),V=N,H=(a("22fe"),Object(w["a"])(V,K,U,!1,null,null,null)),Q=H.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{visible:t.visible,title:t.title+"["+t.formModel.pat_status+"]",centered:"",width:"1000px"},on:{cancel:t.handlerCancel}},[a("template",{slot:"footer"},[11===t.formModel.pat_status?a("span",[a("a-button",{key:"btnReSend",attrs:{type:"primary",loading:t.btnReSendLoading},on:{click:t.handlerReSend}},[t._v("重新发起")])],1):t._e(),13===t.formModel.pat_status?a("span",[a("a-button",{key:"btnWithdraw",attrs:{type:"primary",loading:t.btnWithdrawLoading},on:{click:t.handlerWithdraw}},[t._v("撤销申请")])],1):t._e(),15===t.formModel.pat_status?a("span",[a("a-button",{key:"btnDelete",attrs:{type:"primary",loading:t.btnDeleteLoading},on:{click:t.handlerDelete}},[t._v("删除")])],1):t._e(),13===t.formModel.pat_status||2===t.formModel.pat_status||16===t.formModel.pat_status?a("span",[a("a-button",{key:"btnPrint",on:{click:t.handlerPrint}},[t._v("打印")])],1):t._e(),a("a-button",{key:"btnClose",on:{click:t.handlerCancel}},[t._v("关闭")])],1),a("div",[a("a-row",{attrs:{type:"flex",justify:"center",align:"top"}},[a("a-col",{attrs:{span:13}},[a("a-spin",{attrs:{tip:"Loading...",spinning:t.formSpinning}},[a("a-steps",{attrs:{current:1,size:"small"}},[a("a-step",{attrs:{title:"会诊申请"}}),a("a-step",{attrs:{title:"会诊审核"}}),a("a-step",{attrs:{title:"接收会诊"}}),a("a-step",{attrs:{title:"编辑会诊意见"}}),a("a-step",{attrs:{title:"完成会诊"}})],1),a("br"),a("a-descriptions",{attrs:{title:"患者信息",column:1}},[a("a-descriptions-item",{attrs:{label:"会诊患者"}},[t._v(" "+t._s(t.formModel.name)+" | "+t._s(t.formModel.patientid)+" | "+t._s(t.formModel.visitid)+" ")]),a("a-descriptions-item",{attrs:{label:"患者病情"}},[t._v(t._s(t.formModel.memo))]),a("a-descriptions-item",{attrs:{label:"补充患者资料"}},[t._v("1111")])],1),a("a-descriptions",{attrs:{title:"会诊信息"}},[a("a-descriptions-item",{attrs:{label:"会诊类型"}},[t._v(" "+t._s(t.formModel.consultationattr)+" ")]),a("a-descriptions-item",{attrs:{label:"会诊时间"}},[t._v(" "+t._s(t.formModel.applydate)+" ")]),a("a-descriptions-item",{attrs:{label:"会诊状态"}},[t._v(" "+t._s(t.$GlobalDict.Consultation.ApprovalStatus.FormatDict(t.formModel.pat_status))+" ")]),a("a-descriptions-item",{attrs:{label:"会诊诊断",span:3}},[t._v(" "+t._s(t.formModel.definitediagnosis))]),a("a-descriptions-item",{attrs:{label:"会诊目的",span:3}},[t._v(" "+t._s(t.formModel.consultationpurpose))]),a("a-descriptions-item",{attrs:{label:"会诊对象",span:3}},t._l(t.formModel.clsconsultationdetaillist,(function(e){return a("span",{key:e.key},[a("a-tag",{key:e.key,on:{close:function(){return t.handleClose(e.key)}}},[t._v(" "+t._s(e.groupname+"("+e.consultationdept+")")+" ")])],1)})),0),a("a-descriptions-item",{attrs:{label:"申请医生"}},[t._v(" "+t._s(t.formModel.applydoctor))]),a("a-descriptions-item",{attrs:{label:"联系方式"}},[t._v(t._s(t.formModel.phone))])],1),"3"===t.formModel.consultationattr?a("div",[a("a-descriptions",{attrs:{title:"肿瘤分期",column:3}},[a("a-descriptions-item",{attrs:{label:"分期方法"}},[t._v(t._s(t.formModel.staging_method))]),a("a-descriptions-item",{attrs:{label:"类别"}},[t._v(" "+t._s(t.formModel.classification_stages))]),a("a-descriptions-item",{attrs:{label:"原发肿瘤"}},[t._v(t._s(t.formModel.primary_tumor))]),a("a-descriptions-item",{attrs:{label:"淋巴结转移"}},[t._v(t._s(t.formModel.lymph_metastasis))]),a("a-descriptions-item",{attrs:{label:"远处转移"}},[t._v(t._s(t.formModel.distant_metastasis))]),a("a-descriptions-item",{attrs:{label:"分期"}},[t._v(t._s(t.formModel.by_stages))])],1)],1):t._e()],1)],1),a("a-col",{attrs:{span:11}},[a("view-form-comment",{attrs:{folio:t.initData.primaryKey}})],1)],1)],1)],2)],1)},Y=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-viewfrom-comment"},[a("a-spin",{attrs:{tip:"Loading...",spinning:t.commentSpinning}},[a("div",{staticClass:"comment-header"},[a("span",[t._v("会诊意见 (意见 2 评价1)")]),a("span",[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:t.handlerTest}},[t._v("发表会诊意见")])],1)]),a("div",{staticClass:"comment-Content"},t._l(t.dataComments,(function(e){return a("div",{key:e.wf_id,staticClass:"comment-Content-item"},[a("div",[a("a-avatar",{staticStyle:{color:"#f56a00",backgroundcolor:"#fde3cf"},attrs:{size:45}},[t._v("叶")])],1),a("div",{staticClass:"comment-Content-item-right"},[a("div",{staticClass:"comment-Content-item-right-top"},[a("span",[t._v(t._s(e.wf_approvaluser))]),a("span",[t._v(t._s(e.wf_approvaldept))]),a("span",[t._v(t._s(e.wf_approvaldate))])]),a("div",{staticClass:"comment-Content-item-right-body"},[t._v(" "+t._s(e.wf_opinion)+" ")]),a("div",{staticClass:"comment-Content-item-right-bottom"},[a("span",[t._v("评论 2")]),a("span",[t._v("+评论")])]),a("div",t._l(t.dataReplys,(function(n){return a("div",{key:n.wfc_id},[n.wf_id===e.wf_id?a("div",[a("hr"),t._v(" 分值："+t._s(n.wfc_scoring)+" "),a("div",[a("span",[t._v("医生："+t._s(n.wfc_approvaluserid))]),a("span",[t._v("科室："+t._s(n.wfc_approvaldept))]),a("span",[t._v("回复日期："+t._s(n.wfc_approvaldate))])]),a("div",[t._v("回复内容："+t._s(n.wfc_comment))])]):t._e()])})),0)])])})),0)])],1)},J=[],Z=(a("d81d"),a("a9e3"),{props:{visible:Boolean,folio:Number},data:function(){return{action:null,dataComments:[],dataReplys:[],commentSpinning:!1}},watch:{folio:{handler:function(){this.title="查看会诊申请单详细",this.loadData()},immediate:!0}},methods:{loadData:function(){var t=this;if(console.log("viewformcommentvue this.folio",this.folio),"undefined"!==typeof this.folio&&""!==this.folio){this.commentSpinning=!0;var e=this.$Api.Consultation.CommentList+"?folio=39492";this.$Http.AsyncGet(e).then((function(e){t.dataComments=e.data.map((function(t){return t.workflowapprovallist})),t.dataReplys=[],e.data.forEach((function(e){e.workflowapprovalcomment.forEach((function(e){t.dataReplys.push(e)}))})),t.commentSpinning=!1}))}},handlerTest:function(){console.log("this.tmplist=",this.tmplist),this.dataReplys.push({wf_id:52,wfc_approvaldate:"2020-20-20",wfc_approvaldept:"研发部",wfc_approvaldeptname:"研发部",wfc_approvaluser:"张三",wfc_approvaluserid:"111 ",wfc_approvalusername:"张三",wfc_comment:"asdasdffasdfadfadfadfasdfadsfadfadfadsfa",wfc_folio:'"39492"',wfc_id:3333,wfc_scoring:"5"})}}}),X=Z,tt=(a("24fa"),Object(w["a"])(X,W,J,!1,null,"429d68f7",null)),et=tt.exports,at={components:{viewFormComment:et},props:{visible:Boolean,initData:{type:Object,default:function(){return{isCreat:!1,primaryKey:0,patientId:"",patientName:"叶哲雄",patientVisitId:"001",patientDiagnosis:"小感冒"}}}},data:function(){return{title:"创建会诊申请单",btnSaveLoading:!1,btnSendLoading:!1,btnDraftApplyLoading:!1,btnWithdrawLoading:!1,btnReSendLoading:!1,btnDeleteLoading:!1,formSpinning:!1,labelCol:{span:4},labelCol2:{span:8},wrapperCol:{span:14},formModel:{}}},mounted:function(){},computed:{selectedDoctorsKeys:function(){var t=[];return"undefined"!==typeof this.formModel.clsconsultationdetaillist&&null!=this.formModel.clsconsultationdetaillist&&this.formModel.clsconsultationdetaillist.forEach((function(e){t.push({key:e.consultationdept})})),t}},watch:{initData:{handler:function(){this.title="查看会诊申请单详细",this.loadData()},deep:!0}},methods:{initFormData:function(){this.formModel={consultationpurpose:"",applydoctor:"",definitediagnosis:"",consultationattr:"2",memo:"",phone:"",staging_method:"",clsconsultationdetaillist:[],filelist:[],applydate:null,pat_status:-1}},loadData:function(){var t=this;if(0!==this.initData.primaryKey){this.formSpinning=!0;var e=this.$Api.Consultation.ApplyInfo+"?folio="+this.initData.primaryKey;this.$Http.AsyncPost(e).then((function(e){t.formModel=e.data,t.formSpinning=!1}))}},handlerCancel:function(){this.$emit("update:visible",!1)},handlerDelete:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSave!!"),!1;t.btnDeleteLoading=!0,t.formModel.pat_status=2,t.$Http.AsyncPost(t.$Api.Consultation,t.formModel).then((function(e){t.btnDeleteLoading=!1,t.$message.info("删除成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerWithdraw:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSave!!"),!1;t.btnWithdrawLoading=!0,t.formModel.pat_status=2,t.$Http.AsyncPost(t.$Api.Consultation,t.formModel).then((function(e){t.btnWithdrawLoading=!1,t.$message.info("发送成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerReSend:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSave!!"),!1;t.btnReSendLoading=!0,t.formModel.pat_status=2,t.$Http.AsyncPost(t.$Api.Consultation,t.formModel).then((function(e){t.btnReSendLoading=!1,t.$message.info("发送成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerPrint:function(){var t=this;console.log("print="),console.log("formModel=",this.formModel),this.loading=!0,setTimeout((function(){t.loading=!1,t.$message.info("handlerPrint")}),3e3)},handleClose:function(t){var e=this.tags.filter((function(e){return e!==t}));console.log(e),this.tags=e}}},nt=at,ot=(a("83f9"),Object(w["a"])(nt,B,Y,!1,null,null,null)),it=ot.exports,st=[{title:"床号",width:60,dataIndex:"bedlabel",key:"bedlabel",fixed:"left"},{title:"住院号",dataIndex:"inpno",key:"age",fixed:"left"},{title:"姓名",dataIndex:"name",key:"name",fixed:"left"},{title:"病区",dataIndex:"visitinfowarname",key:"visitinfowarname"},{title:"会诊类型",dataIndex:"consultationtype",key:"consultationtype"},{title:"会诊科室",dataIndex:"consultationdeptlist",key:"consultationdeptlist",width:"300px",ellipsis:!0},{title:"会诊医生",dataIndex:"consultationdoclist",key:"consultationdoclist",width:"150px",ellipsis:!0},{title:"会诊目的",dataIndex:"consultationpurpose",key:"consultationpurpose",ellipsis:!0},{title:"申请会诊时间",dataIndex:"applydate",key:"applydate",ellipsis:!0,width:"200px"},{title:"会诊接收情况",key:"receivenumInfo",scopedSlots:{customRender:"receivenumInfo"}},{title:"会诊状态",key:"pat_status",scopedSlots:{customRender:"patStatus"}},{title:"操作",key:"operation",fixed:"right",width:100,scopedSlots:{customRender:"action"}}],rt=[],lt={components:{editForm:Q,viewForm:it},props:{queryParam:{}},data:function(){return{data:rt,columns:st,pagination:{hideOnSinglePage:!0,pageSize:1e4},loading:!0,editFormVisible:!1,viewFormVisible:!1,formInitData:{}}},mounted:function(){this.fetch()},watch:{queryParam:{handler:function(){this.fetch()},deep:!0}},methods:{handleTableChange:function(t,e,a){console.log(t);var n=Object(z["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.fetch(Object(z["a"])({results:t.pageSize,page:t.current,sortField:a.field,sortOrder:a.order},e))},fetch:function(){var t=this;this.loading=!0;var e=Object(z["a"])({starttime:this.queryParam.applyDateRegion[0].format("YYYY-MM-DD"),endtime:this.queryParam.applyDateRegion[1].format("YYYY-MM-DD")},this.queryParam);this.$Http.AsyncPost(this.$Api.Consultation.ApplyList,e).then((function(e){var a=Object(z["a"])({},t.pagination);a.total=1,t.loading=!1,t.data=e.data,t.pagination=a}))},openForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.formInitData=t,console.log("openForm => this.formInitData =",this.formInitData),this.formInitData.isCreat||2===this.formInitData.pat_status||11===this.formInitData.pat_status?this.editFormVisible=!0:this.viewFormVisible=!0}}},ct=lt,ut=Object(w["a"])(ct,G,q,!1,null,null,null),dt=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,scroll:{x:1500},pagination:t.pagination,loading:t.loading,size:"small"},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"ReceiveNumInfo",fn:function(e,a){return[t._v(" "+t._s(a.receivenum+"/"+a.receiveall)+" ")]}},{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.openForm({primaryKey:n.consulno,pat_status:n.pat_status})}}},[t._v("详细")])]],2)}}])}),a("view-form",{ref:"viewForm",attrs:{visible:t.viewFormVisible,"init-data":t.formInitData},on:{"update:visible":function(e){t.viewFormVisible=e}}})],1)},ft=[],mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{visible:t.visible,title:t.title+"["+t.formModel.pat_status+"]",centered:"",width:"1000px"},on:{cancel:t.handlerCancel}},[a("template",{slot:"footer"},[15===t.formModel.pat_status?a("span",[a("a-button",{key:"btnDelete",attrs:{type:"primary",loading:t.btnDeleteLoading},on:{click:t.handlerDelete}},[t._v("删除")])],1):t._e(),13===t.formModel.pat_status&&"3"!==t.formModel.consultationattr||14===t.formModel.pat_status?a("span",[a("a-button",{key:"btnReceive",attrs:{type:"primary",loading:t.btnReceiveLoading},on:{click:t.handlerReceive}},[t._v("接收")])],1):t._e(),13===t.formModel.pat_status&&"3"===t.formModel.consultationattr?a("span",[a("a-button",{key:"btnCheck",attrs:{type:"primary",loading:t.btnCheckLoading},on:{click:t.handlerCheck}},[t._v("审核")])],1):t._e(),13===t.formModel.pat_status||2===t.formModel.pat_status||16===t.formModel.pat_status?a("span",[a("a-button",{key:"btnPrint",on:{click:t.handlerPrint}},[t._v("打印")])],1):t._e(),a("a-button",{key:"btnClose",on:{click:t.handlerCancel}},[t._v("关闭")])],1),a("div",[a("a-row",{attrs:{type:"flex",justify:"center",align:"top"}},[a("a-col",{attrs:{span:13}},[a("a-spin",{attrs:{tip:"Loading...",spinning:t.formSpinning}},[a("a-steps",{attrs:{current:1,size:"small"}},[a("a-step",{attrs:{title:"会诊申请"}}),a("a-step",{attrs:{title:"会诊审核"}}),a("a-step",{attrs:{title:"接收会诊"}}),a("a-step",{attrs:{title:"编辑会诊意见"}}),a("a-step",{attrs:{title:"完成会诊"}})],1),a("br"),a("a-descriptions",{attrs:{title:"患者信息",column:1}},[a("a-descriptions-item",{attrs:{label:"会诊患者"}},[t._v(" "+t._s(t.formModel.name)+" | "+t._s(t.formModel.patientid)+" | "+t._s(t.formModel.visitid)+" ")]),a("a-descriptions-item",{attrs:{label:"患者病情"}},[t._v(t._s(t.formModel.memo))]),a("a-descriptions-item",{attrs:{label:"补充患者资料"}},[t._v("1111")])],1),a("a-descriptions",{attrs:{title:"会诊信息"}},[a("a-descriptions-item",{attrs:{label:"会诊类型"}},[t._v(" "+t._s(t.formModel.consultationattr)+" ")]),a("a-descriptions-item",{attrs:{label:"会诊时间"}},[t._v(" "+t._s(t.formModel.applydate)+" ")]),a("a-descriptions-item",{attrs:{label:"会诊状态"}},[t._v(" "+t._s(t.$GlobalDict.Consultation.ApprovalStatus.FormatDict(t.formModel.pat_status))+" ")]),a("a-descriptions-item",{attrs:{label:"会诊诊断",span:3}},[t._v(" "+t._s(t.formModel.definitediagnosis))]),a("a-descriptions-item",{attrs:{label:"会诊目的",span:3}},[t._v(" "+t._s(t.formModel.consultationpurpose))]),a("a-descriptions-item",{attrs:{label:"会诊对象",span:3}},t._l(t.formModel.clsconsultationdetaillist,(function(e){return a("span",{key:e.key},[a("a-tag",{key:e.key,on:{close:function(){return t.handleClose(e.key)}}},[t._v(" "+t._s(e.groupname+"("+e.consultationdept+")")+" ")])],1)})),0),a("a-descriptions-item",{attrs:{label:"申请医生"}},[t._v(" "+t._s(t.formModel.applydoctor))]),a("a-descriptions-item",{attrs:{label:"联系方式"}},[t._v(t._s(t.formModel.phone))])],1),"3"===t.formModel.consultationattr?a("div",[a("a-descriptions",{attrs:{title:"肿瘤分期",column:3}},[a("a-descriptions-item",{attrs:{label:"分期方法"}},[t._v(t._s(t.formModel.staging_method))]),a("a-descriptions-item",{attrs:{label:"类别"}},[t._v(" "+t._s(t.formModel.classification_stages))]),a("a-descriptions-item",{attrs:{label:"原发肿瘤"}},[t._v(t._s(t.formModel.primary_tumor))]),a("a-descriptions-item",{attrs:{label:"淋巴结转移"}},[t._v(t._s(t.formModel.lymph_metastasis))]),a("a-descriptions-item",{attrs:{label:"远处转移"}},[t._v(t._s(t.formModel.distant_metastasis))]),a("a-descriptions-item",{attrs:{label:"分期"}},[t._v(t._s(t.formModel.by_stages))])],1)],1):t._e()],1)],1),a("a-col",{attrs:{span:11}},[a("view-form-comment",{attrs:{folio:t.initData.primaryKey}})],1)],1)],1)],2)],1)},ht=[],gt={components:{viewFormComment:et},props:{visible:Boolean,initData:{type:Object,default:function(){return{isCreat:!1,primaryKey:0,patientId:"",patientName:"叶哲雄",patientVisitId:"001",patientDiagnosis:"小感冒"}}}},data:function(){return{title:"创建会诊申请单",btnSaveLoading:!1,btnSendLoading:!1,btnDraftApplyLoading:!1,btnDeleteLoading:!1,btnReceiveLoading:!1,btnCheckLoading:!1,formSpinning:!1,labelCol:{span:4},labelCol2:{span:8},wrapperCol:{span:14},formModel:{}}},mounted:function(){},computed:{selectedDoctorsKeys:function(){var t=[];return"undefined"!==typeof this.formModel.clsconsultationdetaillist&&null!=this.formModel.clsconsultationdetaillist&&this.formModel.clsconsultationdetaillist.forEach((function(e){t.push({key:e.consultationdept})})),t}},watch:{initData:{handler:function(){this.title="查看会诊申请单详细",this.loadData()},deep:!0}},methods:{initFormData:function(){this.formModel={consultationpurpose:"",applydoctor:"",definitediagnosis:"",consultationattr:"2",memo:"",phone:"",staging_method:"",clsconsultationdetaillist:[],filelist:[],applydate:null,pat_status:-1}},loadData:function(){var t=this;if(0!==this.initData.primaryKey){this.formSpinning=!0;var e=this.$Api.Consultation.ApplyInfo+"?folio="+this.initData.primaryKey;this.$Http.AsyncPost(e).then((function(e){t.formModel=e.data,t.formSpinning=!1}))}},handlerCancel:function(){this.$emit("update:visible",!1)},handlerDelete:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSave!!"),!1;t.btnDeleteLoading=!0,t.formModel.pat_status=2,t.$Http.AsyncPost(t.$Api.Consultation,t.formModel).then((function(e){t.btnDeleteLoading=!1,t.$message.info("删除成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerReceive:function(){var t=this;this.$refs.editForm.validate((function(e){if(!e)return console.log("error onSave!!"),!1;t.btnReceiveLoading=!0,t.formModel.pat_status=2,t.$Http.AsyncPost(t.$Api.Consultation,t.formModel).then((function(e){t.btnReceiveLoading=!1,t.$message.info("接收成功"),t.$emit("update:visible",!1),console.log(e)}))}))},handlerCheck:function(){alert("审核对话框")},handlerPrint:function(){var t=this;console.log("print="),console.log("formModel=",this.formModel),this.loading=!0,setTimeout((function(){t.loading=!1,t.$message.info("handlerPrint")}),3e3)},handleClose:function(t){var e=this.tags.filter((function(e){return e!==t}));console.log(e),this.tags=e}}},vt=gt,yt=(a("1743"),Object(w["a"])(vt,mt,ht,!1,null,null,null)),bt=yt.exports,_t=[{title:"床号",width:60,dataIndex:"bedlabel",key:"bedlabel",fixed:"left"},{title:"住院号",dataIndex:"inpno",key:"age",fixed:"left"},{title:"姓名",dataIndex:"name",key:"name",fixed:"left"},{title:"病区",dataIndex:"visitinfowarname",key:"visitinfowarname"},{title:"会诊类型",dataIndex:"consultationtype",key:"consultationtype"},{title:"会诊科室",dataIndex:"consultationdeptlist",key:"consultationdeptlist",width:"300px",ellipsis:!0},{title:"会诊医生",dataIndex:"consultationdoclist",key:"consultationdoclist",width:"150px",ellipsis:!0},{title:"会诊目的",dataIndex:"consultationpurpose",key:"consultationpurpose",ellipsis:!0},{title:"申请会诊时间",dataIndex:"applydate",key:"applydate",ellipsis:!0,width:"200px"},{title:"会诊接收情况",key:"receivenumInfo",scopedSlots:{customRender:"receivenumInfo"}},{title:"会诊状态",dataIndex:"pat_status",key:"pat_status"},{title:"操作",key:"operation",fixed:"right",width:100,scopedSlots:{customRender:"action"}}],kt=[],Dt={components:{viewForm:bt},props:{queryParam:{}},data:function(){return{data:kt,columns:_t,pagination:{hideOnSinglePage:!0,pageSize:1e4},loading:!0,viewFormVisible:!1,formModel:{},formInitData:{}}},mounted:function(){this.fetch()},watch:{queryParam:{handler:function(){this.fetch()},deep:!0}},methods:{handleTableChange:function(t,e,a){console.log(t);var n=Object(z["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.fetch(Object(z["a"])({results:t.pageSize,page:t.current,sortField:a.field,sortOrder:a.order},e))},fetch:function(){var t=this;this.loading=!0;var e=Object(z["a"])({starttime:this.queryParam.applyDateRegion[0].format("YYYY-MM-DD"),endtime:this.queryParam.applyDateRegion[1].format("YYYY-MM-DD")},this.queryParam);this.$Http.AsyncPost(this.$Api.Consultation.ApprovalList,e).then((function(e){var a=Object(z["a"])({},t.pagination);for(var n in a.total=1,t.loading=!1,e.data){var o=e.data[n];o.pat_status=t.$GlobalDict.Consultation.ApprovalStatus.FormatDict(o.pat_status)}t.data=e.data,t.pagination=a}))},openForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.formInitData=t,this.viewFormVisible=!0}}},xt=Dt,Mt=Object(w["a"])(xt,pt,ft,!1,null,null,null),wt=Mt.exports,St={components:{ApplyList:dt,ApprovalList:wt},methods:{tabClick:function(t){switch(this.curlTab=t,t){case"apply-list":this.applyQueryParam.refreshTime=new Date;break;case"approval-list":this.approvalQueryParam.refreshTime=new Date;break}},openForm:function(){var t=this,e={strpatientid:"T620024547",strvisitid:"2059793"};this.$Http.AsyncPost(this.$Api.Patient.GetInPatBasicInfo,e).then((function(e){var a={isCreat:!0,patientId:e.data.patientid,patientName:e.data.name,patientVisitId:e.data.visitid,patientDiagnosis:e.data.diagnosis};console.log("openForm => formInitData=",a),t.$refs.apply_table.openForm(a)}))}},data:function(){return{applyQueryParam:{applyDateRegion:[this.$GlobalFunc.moment().subtract(1,"weeks"),this.$GlobalFunc.moment().endOf("day")],approvalstatus:"99",approvaltype:"99",consultationtype:"99",apprrovaldept:"2022",apprrovaluser:this.$GlobalData.LoginUserInfo.dbuser,refreshTime:""},approvalQueryParam:{applyDateRegion:[this.$GlobalFunc.moment().subtract(1,"weeks"),this.$GlobalFunc.moment().endOf("day")],consultationtype:"99",approvalstatus:"99",apprrovaldept:"2022",approvaltype:"99",apprrovaluser:this.$GlobalData.LoginUserInfo.dbuser,refreshTime:""},curlTab:"apply-list"}}},Ct=St,It=(a("8023"),Object(w["a"])(Ct,T,E,!1,null,null,null)),jt=It.exports;n["a"].use(_["a"]);var $t=new _["a"]({routes:[{path:"/",name:"主界面",redirect:"Consultation",component:C,children:[{path:"Consultation",name:"会诊管理",component:jt}]},{path:"/login",name:"登录页面",component:F}]}),At=5e3,Pt="http://192.168.150.12:1771";f.a.defaults.timeout=At,f.a.defaults.baseURL=Pt,f.a.interceptors.request.use((function(t){return"undefined"!==typeof y.LoginUserInfo&&(t.headers["Access-Token"]=y.AccessToken,t.headers["dbuser"]=y.LoginUserInfo.dbuser,t.headers["username"]=encodeURIComponent(y.LoginUserInfo.username),t.headers["userid"]=y.LoginUserInfo.userid,t.headers["hospitalid"]=y.LoginUserInfo.hospitalid),t.headers["Content-Type"]="application/json-patch+json;charset=UTF-8",t}),Lt),f.a.interceptors.response.use((function(t){return t.data.success||"200"===t.data.code?Promise.resolve(t.data):(b["a"].error({message:"系统提示",description:t.data.msg}),Promise.reject(t.data))}),Lt),l.a.ajaxSetup({timeout:At,async:!1,dataType:"json",contentType:"application/json-patch+json;charset=UTF-8",error:function(t,e,a){Lt(a)},complete:function(t,e){console.log(e)},beforeSend:function(t){console.log("$.ajaxSetup -> beforeSend1"),"undefined"!==typeof y.LoginUserInfo&&(t.setRequestHeader("Access-Token",y.AccessToken),t.setRequestHeader("dbuser",y.LoginUserInfo.dbuser),t.setRequestHeader("username",encodeURIComponent(y.LoginUserInfo.username)),t.setRequestHeader("userid",y.LoginUserInfo.userid),t.setRequestHeader("hospitalid",y.LoginUserInfo.hospitalid))}});var Lt=function(t){if(t.response){var e=t.response.data,a=t.response.status in Ot?Ot[t.response.status]:t.response.data.message,n=y.AccessToken;403===t.response.status&&b["a"].error({message:"错误信息",description:a}),401!==t.response.status||e.result&&e.result.isLogin||(b["a"].error({message:"Unauthorized",description:"Authorization verification failed"}),n&&$t.push({path:"/login"}))}return Promise.reject(t)},Ot={400:"请求参数错误",401:"权限不足, 请重新登录",403:"服务器拒绝本次访问",404:"请求资源未找到",500:"内部服务器错误",501:"服务器不支持该请求中使用的方法",502:"网关错误",504:"网关超时"},Rt={Get:function(t,e){console.log("url=",t);var a=null;return l.a.ajax({url:Pt+t,type:"get",data:JSON.stringify(e),success:function(t){a=t.data}}),a},Post:function(t,e){console.log("params=",e);var a=null;return l.a.ajax({url:Pt+t,type:"post",data:JSON.stringify(e),success:function(t){console.log("post->params = ",e),a=t.data}}),a},Put:function(t,e){var a=null;return l.a.ajax({url:Pt+t,type:"put",data:JSON.stringify(e),success:function(t){a=t.data}}),a},Delete:function(t,e){var a=null;return l.a.ajax({url:Pt+t,type:"delete",data:JSON.stringify(e),success:function(t){a=t.data}}),a},AsyncGet:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get(t));case 1:case"end":return e.stop()}}),e)})))()},AsyncPost:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",f.a.post(t,e));case 1:case"end":return a.stop()}}),a)})))()},AsyncPut:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",f.a.put(t,e));case 1:case"end":return a.stop()}}),a)})))()},AsyncDel:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.delete(t));case 1:case"end":return e.stop()}}),e)})))()},Uploader:function(t,e){var a=new FormData;return a.append("file",e),f.a.post(t,a)},AxiosAll:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.a.all(t).then(f.a.spread((function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return e})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},_axiosAll:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.all(t).then(f.a.spread((function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return e}))));case 1:case"end":return e.stop()}}),e)})))()}},Ft=a("d4ec"),Tt=function t(e){Object(Ft["a"])(this,t),this.dictCategory=e,this.dicts=[],this.cachepPrefix=g,console.log("实例化dictHelper->",e),this.LoadDict=function(){var t={dict_pid:0,dict_type:"string",dict_code:this.dictCategory,dict_sort:0,dict_status:1},e=Rt.Post(u.Common.GetWidgetDict,t);console.log("this.LoadDict = function ("+this.dictCategory+") { => tmpList=",e),e=e.map((function(t){return Object(z["a"])({value:t.dict_code,label:t.dict_comment},t)})),this.dicts=e,s.a.set(this.cachepPrefix+this.dictCategory,this.dicts,6048e5)},this.GetDict=function(){return console.log("获取字典:",this.dictCategory),"undefined"!=typeof this.dicts&&0!==this.dicts.length||(this.dicts=s.a.get(this.cachepPrefix+this.dictCategory)),"undefined"!=typeof this.dicts&&0!==this.dicts.length||this.LoadDict(),this.dicts},this.FormatDict=function(t){var e=this.GetDict();if("undefined"==typeof e||0===e)for(var a in e){var n=e[a];if(n.dict_code===t+"")return n.dict_value}return""},this.RemoveDict=function(){this.dicts=[],s.a.remove(this.cachepPrefix+this.dictCategory)}},Et={Consultation:{ApprovalStatus:{_dictApprovalStatus:[],GetDict:function(){return"undefined"!=typeof this._dictApprovalStatus&&0!==this._dictApprovalStatus.length||this.LoadDict(),this._dictApprovalStatus},FormatDict:function(t){0===this._dictApprovalStatus.length&&this.GetDict();var e=this._dictApprovalStatus;for(var a in e){var n=e[a];if(n.key==t)return n.value}},LoadDict:function(){this._dictApprovalStatus=[{key:"99",value:"所有"},{key:"10",value:"取消会诊"},{key:"12",value:"驳回申请"},{key:"0",value:"退回"},{key:"1",value:"激活"},{key:"2",value:"暂存"},{key:"3",value:"终止"},{key:"11",value:"驳回申请"},{key:"13",value:"申请中"},{key:"14",value:"审核通过"},{key:"15",value:"完成会诊"},{key:"16",value:"会诊中(已接收)"}]},RemoveDict:function(){this._dictApprovalStatus=[]}},ConsultationType:new Tt("Consultation_Type"),ConsultationPurpose:new Tt("Purpose_Onsultation")},TumorStaging:{StagingMethod:new Tt("Staging_Method"),ClassificationStages:new Tt("Classification_Stages"),PrimaryTumor:new Tt("Primary_Tumor"),LymphMetastasis:new Tt("Lymph_Metastasis"),DistantMetastasis:new Tt("Distant_Metastasis"),ByStages:new Tt("By_Stages")}},Gt=(a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("841c"),a("498a"),a("c1df")),qt=a.n(Gt),zt={getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);return null!==a?decodeURI(a[2]):null},packData:function(t){var e={};for(var a in t)null!==t[a]&&t[a]instanceof Array?e[a]=null:"string"===typeof t[a]&&t[a].length>0?e[a]=t[a].trim():e[a]=t[a];return e},AssignmentObject:function(t,e){for(var a in t)if(!(null!==t[a]&&t[a]instanceof Array))for(var n in e)if(a==n){t[a]=e[n];break}return t},clearContent:function(t){var e={};for(var a in t)null!==t[a]&&t[a]instanceof Array?e[a]=t[a]:e[a]=null;return e},isCheck:function(t){return t=t.trim(),null===t||""===t||"undefined"===t}};zt.moment=qt.a;var Kt=zt,Ut=(a("2b36"),a("396d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"select-assay-modal",attrs:{visible:t.visible,closable:!1,centered:"",width:"850px","cancel-text":"取消","ok-text":"确认导入"},on:{cancel:t.closeModal,ok:t.confirmImport}},[a("this-content",t._b({ref:"selectAssayContent"},"this-content",t.$attrs,!1))],1)],1)}),Nt=[],Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-alert",{attrs:{banner:"",message:"导入病人["+t.patientName+"]检验",description:"选择某检查项目后导入，则导入该项目所有信息；选择某检查项目中某些项后导入，则导入该项的信息；",type:"info"}}),a("a-spin",{attrs:{tip:"Loading...",spinning:t.dataSpinning}},[a("a-row",[a("a-col",{attrs:{span:4}},[a("a-table",{attrs:{size:"small",scroll:{y:600},pagination:!1,columns:t.columns,"data-source":t.dataAllItem},scopedSlots:t._u([{key:"item1",fn:function(e,n){return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handlerItem1Click(n.testreqno)}}},[n.testreqno===t.curSelectItem1?a("div",{staticStyle:{background:"#08979c",width:"100%",color:"#fff",padding:"2px"}},[a("span",[t._v(" "+t._s(n.testtext)+" ")]),a("span",[t._v(" "+t._s(n.reqdate.format("yyyy-MM-dd"))+" ")])]):a("div",[t._v(t._s(n.testtext+" "+n.reqdate))])])]}}])})],1),a("a-col",{attrs:{span:10}},[a("a-table",{attrs:{size:"small",scroll:{y:600},pagination:!1,columns:t.columns2,"data-source":t.dataShowItemInfo,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.handlerSelectChange}}})],1),a("a-col",{attrs:{span:10}},[a("a-table",{attrs:{size:"small",scroll:{y:600},pagination:!1,columns:t.columns3,"data-source":t.selectedItemInfo},scopedSlots:t._u([{key:"slot3_2",fn:function(e,n){return[a("a-button",{attrs:{icon:"delete",size:"small",type:"primary"},on:{click:function(e){return t.handlerCancelSelect(n.key)}}})]}}])})],1)],1)],1)],1)},Ht=[],Qt=(a("caad"),a("2532"),[{title:"检验项目",key:"item1",scopedSlots:{customRender:"item1"}}]),Bt=[{title:"检验项",dataIndex:"resultitemname",key:"col2_1"},{title:"值",dataIndex:"result",key:"col2_2"},{title:"单位",dataIndex:"unit",key:"col2_3"},{title:"参考",dataIndex:"normalresult",key:"col2_4"}],Yt=[{title:"检验项",dataIndex:"resultitemname",key:"col3_1"},{title:"值",dataIndex:"result",key:"col3_2"},{title:"单位",dataIndex:"unit",key:"col3_3"},{title:"参考",dataIndex:"normalresult",key:"col3_4"},{title:"",width:60,key:"table3_2",scopedSlots:{customRender:"slot3_2"}}],Wt={props:{patientId:String,patientName:String},data:function(){return{dataAllItem:[],dataShowItemInfo:[],dataAllItemInfo:[],selectedItemInfo:[],columns:Qt,columns2:Bt,columns3:Yt,selectedRowKeys:[],loading:!1,curSelectItem1:0,dataSpinning:!1}},watch:{patientId:{handler:function(t){var e=this;if(console.log("watch patientId=",t),"undefined"!==typeof this.patientId&&""!==this.patientId){this.dataSpinning=!0;var a=[],n=this.$Api.Common.GetLabTestItem,o={strPatID:this.patientId,nVisitID:null,dtVisitDate:null,nVisitNo:null,bIsInPat:!1,eListResultStatus:[51,52,53],dtScheduledDateTimeFrom:null,dtScheduledDateTimeTo:null,strListReqDept:[],strWardCode:null,strDeptCode:null,IsError:!1,ErrMessage:null};a.push(this.$Http.AsyncPost(n,o));var i=this.$Api.Common.GetLabTestItemInfo,s={strPatID:this.patientId,nVisitID:null,dtVisitDate:null,nVisitNo:null,bIsInPat:!1,eListResultStatus:[],dtScheduledDateTimeFrom:null,dtScheduledDateTimeTo:null,strListReqDept:[],strWardCode:null,strDeptCode:null,IsError:!1,ErrMessage:null};a.push(this.$Http.AsyncPost(i,s)),this.$Http.AxiosAll(a).then((function(t){e.dataAllItem=t[0].data;for(var a=t[1].data.length,n=0;n<a;++n){var o=t[1].data[n];o.key=o.testresultno}e.dataAllItemInfo=t[1].data,e.dataSpinning=!1,e.dataAllItem.length>0&&e.handlerItem1Click(e.dataAllItem[0].testreqno)}))}else this.$message.error("选中病人检验结果窗体，patientId值不能未空")},immediate:!0}},computed:{},methods:{handlerItem1Click:function(t){this.curSelectItem1=t,this.dataShowItemInfo=this.dataAllItemInfo.filter((function(e){return e.testreqno===t}))},handlerSelectChange:function(t){var e=this;this.selectedRowKeys=t,this.dataAllItemInfo.forEach((function(t){if(e.selectedRowKeys.includes(t.testresultno)){var a=!1;e.selectedItemInfo.forEach((function(e){e.testresultno===t.testresultno&&(a=!0)})),a||e.selectedItemInfo.push(t)}})),this.selectedItemInfo.forEach((function(t){e.selectedRowKeys.includes(t.testresultno)||e.selectedItemInfo.removeValue(t)}))},handlerCancelSelect:function(t){var e=this;console.log("key=",t),this.selectedItemInfo=this.selectedItemInfo.filter((function(e){return e.key!==t})),this.selectedRowKeys.forEach((function(a){a===t&&e.selectedRowKeys.removeValue(t)}))}}},Jt=Wt,Zt=Object(w["a"])(Jt,Vt,Ht,!1,null,null,null),Xt=Zt.exports,te={components:{thisContent:Xt},props:{visible:Boolean},data:function(){return{}},mounted:function(){},methods:{closeModal:function(){this.$emit("update:visible",!1)},confirmImport:function(){this.$emit("confirmImport",this.$refs.selectAssayContent.selectedItemInfo),this.closeModal()}}},ee=te,ae=Object(w["a"])(ee,Ut,Nt,!1,null,null,null),ne=ae.exports;a("6e1f");ne.install=function(t){t.component("select-assay-modal",ne)};var oe=ne,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"select-examination-modal",attrs:{visible:t.visible,closable:!1,centered:"",width:"850px","cancel-text":"取消","ok-text":"确认导入"},on:{cancel:t.closeModal,ok:t.confirmImport}},[a("this-content",t._b({ref:"selectExaminationContent"},"this-content",t.$attrs,!1))],1)],1)},se=[],re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-alert",{attrs:{banner:"",message:"导入病人["+t.patientName+"]检查",description:"选择某检查项目后导入，则导入该项目所有信息；选择某检查项目中某些项后导入，则导入该项的信息；",type:"info"}}),a("a-spin",{attrs:{tip:"Loading...",spinning:t.dataSpinning}},[a("a-row",[a("a-col",{attrs:{span:8}},[a("a-table",{attrs:{size:"small",scroll:{y:600},pagination:!1,columns:t.columns,"data-source":t.dataAllItem,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.handlerSelectChange,onSelect:t.handlerSetCheck}},scopedSlots:t._u([{key:"item1",fn:function(e,n){return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handlerItem1Click(n.key)}}},[n.key===t.curSelectItem?a("div",{staticStyle:{background:"#08979c",width:"100%",color:"#fff",padding:"2px"}},[t._v(" "+t._s(n.examitemname+" "+n.lastupdatedate)+" ")]):a("div",[t._v(t._s(n.examitemname+" "+n.lastupdatedate))])])]}}])})],1),a("a-col",{attrs:{span:16}},[a("span",{staticStyle:{margin:"10px"}},[t._v(" "+t._s(t.itemDetail))])])],1)],1)],1)},le=[],ce=[{title:"检查项",key:"item1",scopedSlots:{customRender:"item1"}}],ue={props:{patientId:String,patientName:String},data:function(){return{dataAllItem:[],columns:ce,selectedRowKeys:[],selectedItems:[],curSelectItem:0,dataSpinning:!1,itemDetail:""}},watch:{patientId:{handler:function(t){var e=this;if(console.log("watch patientId=",t),"undefined"!==typeof this.patientId&&""!==this.patientId){this.dataSpinning=!0;var a=this.$Api.Common.GetExamReport,n={PatId:this.patientId,IsClinic:!1};this.$Http.AsyncPost(a,n).then((function(t){for(var a=t.data.length,n=0;n<a;++n){var o=t.data[n];o.key=n}e.dataAllItem=t.data,console.log("this.dataAllItem=",e.dataAllItem),e.dataAllItem.length>0&&e.handlerItem1Click(e.dataAllItem[0].key),e.dataSpinning=!1}))}else this.$message.error("选中病人检查结果窗体，patientId值不能未空")},immediate:!0}},computed:{},methods:{handlerItem1Click:function(t){this.curSelectItem=t,this.itemDetail=this.dataAllItem[t].rptsubjectivedesc},handlerSelectChange:function(t){var e=this;this.selectedItems=[],this.selectedRowKeys=t,this.dataAllItem.forEach((function(t){e.selectedRowKeys.includes(t.key)&&e.selectedItems.push({key:t.key,item:t.examitemname,value:t.rptsubjectivedesc})}))},handlerSetCheck:function(t){this.handlerItem1Click(t.key)}}},de=ue,pe=Object(w["a"])(de,re,le,!1,null,null,null),fe=pe.exports,me={components:{thisContent:fe},props:{visible:Boolean},data:function(){return{}},mounted:function(){},methods:{closeModal:function(){this.$emit("update:visible",!1)},confirmImport:function(){this.$emit("confirmImport",this.$refs.selectExaminationContent.selectedItems),this.closeModal()}}},he=me,ge=Object(w["a"])(he,ie,se,!1,null,null,null),ve=ge.exports;a("ca62");ve.install=function(t){t.component("select-examination-modal",ve)};var ye=ve,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"select-assay-modal",attrs:{visible:t.visible,closable:!1,centered:"",width:"850px","cancel-text":"取消","ok-text":"确认导入"},on:{cancel:t.closeModal,ok:t.confirmImport}},[a("this-content",t._b({ref:"selectDoctorsContent"},"this-content",t.$attrs,!1))],1)],1)},_e=[],ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v(" $attrs:"+t._s(t.$attrs)+" "),a("br"),t._v(" $props:"+t._s(t.$props)+" "),a("br"),a("a-alert",{attrs:{banner:"",message:"选择会诊对象",description:"",type:"info"}}),a("a-spin",{attrs:{tip:"Loading...",spinning:t.dataSpinning}},[a("a-row",[a("a-col",{attrs:{span:4}}),a("a-col",{attrs:{span:10}},[a("a-input-search",{attrs:{placeholder:"input search text"},on:{change:t.handlerSearch},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),a("a-col",{attrs:{span:10}})],1),a("a-row",[a("a-col",{attrs:{span:4}},[a("a-table",{attrs:{size:"small",scroll:{y:600},pagination:!1,columns:t.table1Columns,"data-source":t.table1Data},scopedSlots:t._u([{key:"slot1",fn:function(e,n){return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handlerItem1Click(n.key)}}},[n.key===t.curSelectItem1?a("div",{staticStyle:{background:"#08979c",width:"100%",color:"#fff",padding:"2px"}},[t._v(" "+t._s(n.value)+" ")]):a("div",[t._v(t._s(n.value))])])]}}])})],1),a("a-col",{attrs:{span:10}},[a("a-table",{attrs:{size:"small",scroll:{y:600},pagination:t.pagination,columns:t.table2Columns,"data-source":t.table2Data,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.handlerSelectChange}},on:{change:t.handlerTable2Change},scopedSlots:t._u([{key:"slot2",fn:function(e,n){return[t._v(" "+t._s(n.value+"("+n.searchKey+")")+" "),"3"===t.curSelectItem1?a("span",[t._v(" "+t._s("("+n.groupName+")")+" ")]):t._e()]}}])})],1),a("a-col",{attrs:{span:10}},[a("a-table",{attrs:{size:"small",scroll:{y:600},pagination:!1,columns:t.table3Columns,"data-source":t.table3Data},scopedSlots:t._u([{key:"slot3",fn:function(e,n){return[t._v(" "+t._s(n.typeName+n.value+" "+n.searchKey+" ")+" "),""!==n.groupName?a("span",[t._v(" "+t._s("("+n.groupName+")")+" ")]):t._e()]}},{key:"slot3_2",fn:function(e,n){return[a("a-button",{attrs:{icon:"delete",size:"small",type:"primary"},on:{click:function(e){return t.handlerCancelSelect(n.key)}}})]}}])})],1)],1)],1)],1)},De=[],xe={props:{selectedKeys:[],consultationType:String},data:function(){return{table1Columns:[{title:"会诊对象类型",key:"table1_1",scopedSlots:{customRender:"slot1"}}],table2Columns:[{title:"待选对象",key:"table2_1",scopedSlots:{customRender:"slot2"}}],table3Columns:[{title:"已选会诊对象",key:"table3_1",scopedSlots:{customRender:"slot3"}},{title:"",width:60,key:"table3_2",scopedSlots:{customRender:"slot3_2"}}],table1Data:[{key:"2",value:"按个人"},{key:"3",value:"按专家组"},{key:"1",value:"按科室"}],table2Data:[],table3Data:[],searchKey:"",selectedRowKeys:[],loading:!1,curSelectItem1:0,dataSpinning:!1,pagination:{hideOnSinglePage:!0,pageSize:15,current:1,total:0}}},mounted:function(){this.handlerItem1Click("2")},computed:{},watch:{consultationType:{handler:function(){"3"===this.consultationType?this.table1Data=[{key:"2",value:"按个人"},{key:"3",value:"按专家组"}]:this.table1Data=[{key:"2",value:"按个人"},{key:"1",value:"按科室"}],this.handlerItem1Click("2")},immediate:!0}},methods:{handlerSearch:function(){this.pagination.current=1,"1"===this.curSelectItem1&&this.getOffice(),"3"===this.curSelectItem1&&this.getExperts(),"2"===this.curSelectItem1&&this.getDoctors()},handlerTable2Change:function(t){this.pagination.current=t.current,"1"===this.curSelectItem1&&this.getOffice(),"3"===this.curSelectItem1&&this.getExperts(),"2"===this.curSelectItem1&&this.getDoctors()},handlerItem1Click:function(t){this.curSelectItem1=t,this.handlerSearch()},getOffice:function(){var t=this;this.dataSpinning=!0,this.table2Data=[];var e=this.searchKey.toUpperCase();this.$GlobalData.GetOfficesInPage(this.pagination,e).then((function(e){e.data.forEach((function(e){t.table2Data.push({key:e.itemcode,id:e.itemcode,value:e.itemname,searchKey:e.inputcode,groupCode:"",groupName:"",deptCode:e.itemcode,pkey:"1"})})),t.pagination.total=e.total,t.dataSpinning=!1}))},getDoctors:function(){var t=this;this.dataSpinning=!0,this.table2Data=[];var e=this.searchKey.toUpperCase();this.$GlobalData.GetDoctorsInPage(this.pagination,e).then((function(e){console.log("res=",e),e.data.forEach((function(e){t.table2Data.push({key:e.dbuser+e.groupcode,id:e.dbuser,value:e.name,searchKey:e.inputcode,groupCode:e.groupcode,groupName:e.groupname,deptCode:e.deptcode,pkey:"2"})})),t.pagination.total=e.total,t.dataSpinning=!1}))},getExperts:function(){var t=this;this.dataSpinning=!0,this.table2Data=[];var e=this.searchKey.toUpperCase();this.$GlobalData.GetExpertsInPage(this.pagination,e).then((function(e){e.data.forEach((function(e){t.table2Data.push({key:e.ex_code,id:e.ex_code,value:e.ex_name,searchKey:e.ex_code,groupCode:e.ex_code,groupName:e.ex_name,deptCode:e.ex_code,pkey:"3"})})),t.pagination.total=e.total,t.dataSpinning=!1}))},handlerSelectChange:function(t){var e=this;this.selectedRowKeys=t,this.table2Data.forEach((function(t){if(e.selectedRowKeys.includes(t.key)){var a=!1;if(e.table3Data.forEach((function(e){e.key==t.key&&(a=!0)})),!a){var n="【专家组】";"1"===e.curSelectItem1&&(n="【科室】"),"2"===e.curSelectItem1&&(n="【专家组】"),"3"===e.curSelectItem1&&(n="【个人】"),e.table3Data.push({id:t.id,key:t.key,value:t.value,groupName:t.groupName,groupCode:t.groupCode,deptCode:t.deptCode,type:e.curSelectItem1,typeName:n,searchKey:t.searchKey})}}})),this.table3Data.forEach((function(t){e.selectedRowKeys.includes(t.key)||e.table3Data.removeValue(t)}))},handlerCancelSelect:function(t){var e=this;this.table3Data=this.table3Data.filter((function(e){return e.key!==t})),this.selectedRowKeys.forEach((function(a){a===t&&e.selectedRowKeys.removeValue(t)}))},clearData:function(){this.table3Data=[],this.selectedRowKeys=[]}}},Me=xe,we=Object(w["a"])(Me,ke,De,!1,null,null,null),Se=we.exports,Ce={components:{thisContent:Se},props:{visible:Boolean},data:function(){return{}},methods:{closeModal:function(){this.$refs.selectDoctorsContent.clearData(),this.$emit("update:visible",!1)},confirmImport:function(){this.$emit("confirmImport",this.$refs.selectDoctorsContent.table3Data),this.closeModal()}}},Ie=Ce,je=Object(w["a"])(Ie,be,_e,!1,null,null,null),$e=je.exports;a("595f");$e.install=function(t){t.component("select-doctors-modal",$e)};var Ae=$e;n["a"].use(oe),n["a"].use(ye),n["a"].use(Ae),n["a"].use(o["a"]),n["a"].config.productionTip=!1,n["a"].prototype.$storage=s.a,n["a"].prototype.$Api=u,n["a"].prototype.$Http=Rt,n["a"].prototype.$GlobalData=y,n["a"].prototype.$GlobalDict=Et,n["a"].prototype.$GlobalFunc=Kt,n["a"].prototype.$Jquery=l.a,new n["a"]({router:$t,render:function(t){return t(c["default"])}}).$mount("#app")},"595f":function(t,e,a){},"6c1d":function(t,e,a){},"6e1f":function(t,e,a){},8023:function(t,e,a){"use strict";var n=a("cba0"),o=a.n(n);o.a},"83f9":function(t,e,a){"use strict";var n=a("f0f0"),o=a.n(n);o.a},"85ec":function(t,e,a){},9293:function(t,e,a){"use strict";var n=a("0e14"),o=a.n(n);o.a},"9cf4":function(t,e,a){},b610:function(t,e,a){},ca62:function(t,e,a){},cba0:function(t,e,a){},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},d1fa:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[]},f0f0:function(t,e,a){}});
//# sourceMappingURL=app.c9c51310.js.map